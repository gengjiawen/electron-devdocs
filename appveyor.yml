version: 1.0.{build}

image:
  - Visual Studio 2019

platform:
  - x64

init:
  - git config --global core.autocrlf input
  - ps: iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))


install:
  - ps: Install-Product node 12 x64
  - git clone https://github.com/cjihrig/uvwasi
  - choco install mingw
  - choco install clion-ide
  - yarn install

build_script:
  - npx envinfo
  - npm run electron-build
  
on_finish:
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))

test: off
